
---

## C# The `throw` Keyword

So far, we have looked at catching errors (using try-catch).

The throw keyword allows you to create (raise) an error manually.

This is used for **Defensive Programming**. You use it to enforce rules and stop the program if data is invalid.

### 1. Manually Creating an Exception

If a user gives you bad data (like a negative age or an empty password), you shouldn't just print a message; you should **throw an exception** to stop the operation immediately.

C#

```C#
public void SetAge(int age)
{
    // 1. Validate the input
    if (age < 0)
    {
        // 2. Stop execution immediately and report error
        // We create a NEW exception object and 'throw' it.
        throw new ArgumentOutOfRangeException("Age cannot be negative!");
    }

    // 3. This line will NOT run if the exception was thrown
    this.Age = age;
}
```

### 2. Common Exception Types to Throw

You should try to throw specific standard exceptions rather than just generic `Exception`.

|**Exception Type**|**When to throw it**|
|---|---|
|`ArgumentNullException`|When a required parameter is `null`.|
|`ArgumentOutOfRangeException`|When a number is too high/low (e.g., Age = -5).|
|`ArgumentException`|General bad input (e.g., Password is too short).|
|`InvalidOperationException`|When the method cannot run in the current state (e.g., trying to write to a closed file).|

### 3. Re-Throwing (Inside a Catch Block)

Sometimes you want to catch an error, log it, and then **let it bubble up** so the main program knows it happened.

**CRITICAL RULE:** When re-throwing, use `throw;` (without the variable), not `throw ex;`.

C#

```C#
try
{
    // Risky code
    ProcessData();
}
catch (Exception ex)
{
    // 1. Log the error locally
    Logger.Log("Something went wrong: " + ex.Message);

    // 2. Re-throw it to the caller
    
    // BAD WAY:
    // throw ex; 
    // (This resets the 'Stack Trace'. You lose the info about where the error originally started.)

    // GOOD WAY:
    throw; 
    // (This keeps the original error history perfectly intact.)
}
```

### Summary

- **`throw new Exception(...)`**: Creates a new error (Used for Validation).
    
- **`throw;`**: Passes an existing error up the chain (Used inside `catch`).