
---

## C# Managing Multiple Exceptions

When a block of code can fail in different ways, you often need to handle each error differently.

For example, "File not found" needs a different fix than "No internet access".

You can chain multiple `catch` blocks to handle specific scenarios.

### 1. The Hierarchy Rule (Order Matters!)

C# checks catch blocks from **Top to Bottom**. It executes the **first one that matches** and ignores the rest.

**The Rule:** Always catch **Specific** exceptions first, and the **General** (`Exception`) last.

C#

```C#
try
{
    Console.Write("Enter a number: ");
    int num = int.Parse(Console.ReadLine());
    
    int result = 100 / num;
    Console.WriteLine($"Result: {result}");
}
// 1. Specific Error: User typed "abc" instead of "123"
catch (FormatException ex)
{
    Console.WriteLine("Please enter only numbers!");
}
// 2. Specific Error: User typed "0"
catch (DivideByZeroException ex)
{
    Console.WriteLine("You cannot divide by zero!");
}
// 3. Specific Error: Number is too huge for an int
catch (OverflowException ex)
{
    Console.WriteLine("Number is too big!");
}
// 4. General "Catch-All": Anything else we didn't predict
catch (Exception ex)
{
    Console.WriteLine($"Something unexpected happened: {ex.Message}");
}
```

### 2. Common Pitfall (Compiler Error)

If you put catch (Exception) at the top, the compiler will give you an error for the blocks below it.

Why? Because Exception is the parent of all errors, so it would catch everything, making the specific blocks below it unreachable (dead code).

C#

```C#
// BAD CODE - Will not compile
try 
{
    // ...
}
catch (Exception ex) // This eats everything!
{
    // ...
}
catch (DivideByZeroException ex) // Compiler Error: "This block is unreachable"
{
    // ...
}
```

### 3. Exception Filters (`when`)

You can also filter exceptions based on properties without needing a separate catch block. This is done using the `when` keyword.

C#

```C#
try
{
    // ... code ...
}
catch (Exception ex) when (ex.Message.Contains("404"))
{
    Console.WriteLine("Page not found error.");
}
catch (Exception ex)
{
    Console.WriteLine("Some other error.");
}
```