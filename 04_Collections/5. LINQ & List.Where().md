
---

## C# LINQ & `.Where()`

**LINQ** (Language Integrated Query) is a powerful set of tools in C# that allows you to query and filter data from different sources (Arrays, Lists, XML, Databases) using a consistent syntax.

To use it, you **must** add this namespace at the top of your file:

C#

```C#
using System.Linq;
```

### 1. The `.Where()` Method

`.Where()` is the standard LINQ equivalent of `.FindAll()`. It is used to filter a collection based on a condition (Predicate).

**Why use `Where` instead of `FindAll`?**

- `FindAll` only works on `List<T>`.
    
- `Where` works on **everything** (Arrays, Lists, Sets, Database results, etc.). It is the industry standard.
    

### 2. Key Difference: Deferred Execution (Lazy)

This is the most important concept to understand.

- `FindAll` returns a new `List` **immediately**.
    
- `Where` returns an `IEnumerable` (a query). It does **not** execute the filtering immediately. It only prepares the logic. The filtering happens only when you actually iterate over the results or convert them to a list.
    

### 3. How to use it (Materialization)

Because `Where` returns an `IEnumerable`, you usually need to convert it back to a List using `.ToList()` to use it comfortably.

C#

```C#
List<int> numbers = new List<int> { 1, 5, 10, 20, 3 };

// 1. USING WHERE
// "Keep numbers greater than 5"
// We must use .ToList() at the end to execute the query and store results.
List<int> bigNumbers = numbers.Where(n => n > 5).ToList();
```

### 4. Example with Complex Objects

Using the `Product` class from the previous note:

C#

```C#
List<Product> shop = new List<Product>
{
    new Product { Name = "Laptop", Price = 1000 },
    new Product { Name = "Mouse", Price = 25 },
    new Product { Name = "Monitor", Price = 150 }
};

// CHAINING LINQ METHODS
// You can chain multiple LINQ methods together before .ToList()
List<Product> results = shop
    .Where(p => p.Price < 500)    // 1. Filter cheap items
    .Where(p => p.Name.StartsWith("M")) // 2. Filter names starting with 'M'
    .OrderBy(p => p.Price)        // 3. Sort them
    .ToList();                    // 4. Execute and save to list

// Result: Mouse ($25), Monitor ($150)
```

### 5. Comparison: `FindAll` vs `Where`

|**Feature**|**.FindAll(...)**|**.Where(...)**|
|---|---|---|
|**Source**|Only `List<T>`|Any Collection (Array, List, DB)|
|**Namespace**|System.Collections.Generic|**System.Linq**|
|**Return Type**|`List<T>`|`IEnumerable<T>`|
|**Execution**|Immediate|**Deferred (Lazy)**|
|**Recommendation**|Use for simple List tasks.|**Preferred choice** for almost everything.|

### 6. Bonus: Query Syntax

C# also supports a SQL-like syntax for LINQ, though Method Syntax (Lambdas) is more common.

C#

```C#
// SQL-style syntax
var expensiveItems = from p in shop
                     where p.Price > 500
                     select p;
```