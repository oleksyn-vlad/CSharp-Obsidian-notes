
---

## C# DateTime & TimeSpan

The DateTime type is used to work with dates and times.

It is a Struct (Value Type), meaning it cannot be null (unless you use DateTime?) and it is passed by value.

### 1. Getting the Current Time

There are two main ways to get the "now":

- **`DateTime.Now`**: The time on the local computer (uses the PC's timezone). Good for showing time to the user.
    
- **`DateTime.UtcNow`**: The Universal Coordinated Time (Greenwich Mean Time). **Always use this for Databases/Servers** to avoid timezone bugs.
    
- **`DateTime.Today`**: The current date, but with time set to `00:00:00`.
    

C#

```C#
DateTime local = DateTime.Now;       // 2023-10-05 14:30:00 (Local)
DateTime utc = DateTime.UtcNow;      // 2023-10-05 11:30:00 (UTC)
DateTime today = DateTime.Today;     // 2023-10-05 00:00:00
```

### 2. Creating a Specific Date

You use the constructor `new DateTime(Year, Month, Day, Hour, Minute, Second)`.

C#

```C#
// Christmas 2025
DateTime christmas = new DateTime(2025, 12, 25); 

// specific time: 7:30 AM
DateTime meeting = new DateTime(2025, 10, 5, 7, 30, 0);
```

### 3. Date Math (Immutability)

This is the most common mistake beginners make.

DateTime is Immutable. You cannot change it. Methods like .AddDays() do not modify the variable; they return a new one.

C#

```C#
DateTime date = DateTime.Now;

// ❌ WRONG: This does nothing to 'date'
date.AddDays(1); 

// ✅ CORRECT: Capture the result
DateTime tomorrow = date.AddDays(1);
DateTime nextWeek = date.AddDays(7);
DateTime lastMonth = date.AddMonths(-1);
```

### 4. Subtraction & TimeSpan

If you subtract one date from another (DateA - DateB), the result is not a DateTime. It is a TimeSpan.

A TimeSpan represents a duration of time (e.g., "2 days, 4 hours").

C#

```C#
DateTime start = new DateTime(2023, 1, 1);
DateTime end = new DateTime(2023, 1, 5);

TimeSpan duration = end - start;

Console.WriteLine(duration.Days); // Output: 4
Console.WriteLine(duration.TotalHours); // Output: 96
```

### 5. Formatting (Displaying Strings)

You can convert dates to strings in many formats.

C#

```C#
DateTime now = DateTime.Now;

Console.WriteLine(now.ToString()); // "10/5/2023 2:30:00 PM" (Default)
Console.WriteLine(now.ToShortDateString()); // "10/5/2023"
Console.WriteLine(now.ToLongDateString());  // "Thursday, October 5, 2023"

// Custom Formats
// yyyy = Year, MM = Month, dd = Day, HH = 24-Hour, mm = Minute
Console.WriteLine(now.ToString("yyyy-MM-dd HH:mm")); // "2023-10-05 14:30"
```